<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="./static/css/base.css" rel="stylesheet">
    <link href="./static/css/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.font.im/css?family=Source+Serif+Pro%7CLato%7CInconsolata" rel="stylesheet"
        type="text/css">
    <title> main </title>
    <!-- browser favicon -->
    <link rel="shortcut icon" href="./static/img/favicon.png">
    <style>
        .font-sans {
            font-family: 'Lato', 'SimHei', 'STHeiti', 'SimHei', 'Serif';
        }

        .font-serif {
            font-family: 'Source Serif Pro', 'Songti SC', 'SimSun', 'Serif', serif;
        }
    </style>
    <!-- <link rel="stylesheet" href="https://jyywiki.cn/static/katex/katex.min.css">
    <script defer src="https://jyywiki.cn/static/katex/katex.min.js"></script> -->
    <link rel="stylesheet" href="./static/katex/katex.min.css">
    <script defer src="./static/katex/katex.min.js"></script>
    <!-- <script defer src="https://jyywiki.cn/static/katex/auto-render.min.js"
        integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
        crossorigin="anonymous"></script> -->
    <script defer src="./static/katex/auto-render.min.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                // customised options
                // &#8226; auto-render specific keys, e.g.:
                delimiters: [
                    { left: '$$', right: '$$', display: true },
                    { left: '$', right: '$', display: false },
                    { left: '\\(', right: '\\)', display: false },
                    { left: '\\[', right: '\\]', display: true }
                ],
                // &#8226; rendering keys, e.g.:
                throwOnError: false
            });
        });
    </script>

    <link rel="stylesheet" href="./static/reveal/reveal.css">
    <link rel="stylesheet" href="./static/reveal/theme/simple.css" id="theme">
    <link rel="stylesheet" href="./static/jyy/jyy.css">

</head>

<body class="d-flex flex-column h-100">

    <div class="reveal">
        <div class="slides">
            <section><section><div class="center middle"><div style="width:100%"><div><h1 id="mini_linux" class="text-2xl mt-2 font-sans"><a href="../../../dist/index.html#/2">ğŸ </a>æ„å»ºmini_linux</h1><p class="font-serif my-1">
    <include src="Slides_Author">
        <div class="py-16">
            <p class="font-serif my-1">
                <a href="http://luoyebai.cn:7890" class=" text-amber-900">
                    ä½œè€…ï¼šè°­å˜‰æ·³
                </a>
            </p>
        </div>
        <div class="row">
            <p class="font-serif my-1"/>
            
            <div class="author-affiliation">
                <a href="https://csdiy.wiki/" class=" text-amber-900">
                    <p class="font-serif my-1">
                        CS-Self-Learning
                    </p>
                    <img class="inline-img h-24" src="./static/img/4476be3ca7ef49318db3c4ccc2ad2bb5.jpg" style="display: inline-block;"/>
                </a>
            </div>
            
            <div class="author-affiliation">
                <a href="https://github.com/" class=" text-amber-900">
                    <p class="font-serif my-1">
                        Github
                    </p>
                    <img class="inline-img h-24" src="./static/img/87b412414f06443d80493ec7ce16fb3f.jpg" style="display: inline-block;"/>
                </a>
            </div>
            
            <div class="author-affiliation">
                <a href="https://github.com/topics/awesome" class=" text-amber-900">
                    <p class="font-serif my-1">
                        Awesomeã€€Lists
                    </p>
                    <img class="inline-img h-24" src="./static/img/42fd209b91854e9bbf63631ceea3684c.svg" style="display: inline-block;"/>
                </a>
            </div>
            
        </div>
    </include>
</p></div></div></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">æ¦‚è¿°</h2>
<ul class="list-disc font-serif">
<li class="ml-8">å…³äº<a href="https://www.busybox.net/">busybox</a>/<a href="https://landley.net/toybox/">toybox</a></li>
<li class="ml-8">ç¼–è¯‘<a href="https://www.kernel.org/">linux kernel</a></li>
<li class="ml-8">ä»<a href="https://www.qemu.org/">qemu</a>å¯åŠ¨mini_linux  </li>
</ul></div></section></section><section><section><div class="center middle"><div style="width:100%"><div><h1 id="busyboxtoybox" class="text-2xl mt-2 font-sans">å…³äºbusybox/toybox</h1>
<p class="font-serif my-1">æœ¬è´¨ä¸Šè¿˜æ˜¯ç¨‹åºï¼ŒåŒ…å«äº†Linuxå‘½ä»¤è¡Œçš„å®ç°</p></div></div></div></section><section><div><h2 id="linux" class="text-xl mt-2 pb-2 font-sans">å¯èƒ½æœ‰æœ€ç²¾ç®€çš„Linuxå‘½ä»¤è¡Œå·¥å…·</h2>
<blockquote>
<p class="font-serif my-1">æˆ‘ä»¬è¿™æ¬¡ä¸ä½¿ç”¨åŒ…ç®¡ç†ï¼Œè€Œæ˜¯ä»æºç æ¥ç¼–è¯‘</p>
</blockquote>
<p class="font-serif my-1"><a href="www.gnu.org/software/make/manual/make.html">makefile</a><br/></p>
<p class="font-serif my-1">makefile é™¤äº†ä¸€äº›åŸºæœ¬çš„è¯­æ³•å¤–ï¼Œ<blue>æœ¬è´¨ä¸Šå°±æ˜¯åœ¨ä½¿ç”¨shell</blue></p>
<p class="font-serif my-1">ä¼šå‘½ä»¤è¡Œï¼Œåœ¨å¾ˆå¤§ç¨‹åºä¸Šå°±ä¼šmakefile</p>
<p class="font-serif my-1">makefile å¯ä»¥å¾ˆæ–¹ä¾¿?åºé‚£è®©å…¶ä»–äººä½¿ç”¨makeå‘½ä»¤æ¥æ„å»ºé¡¹ç›®
<del>è™½ç„¶å¯¹è‡ªå·±ä¸å¤ªå‹å¥½</del></p>
<p class="font-serif my-1">å…ˆåˆ›å»ºmini_linuxæ–‡ä»¶å¤¹ã€‚</p>
<div class="codehilite"><pre class="bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span/><code><span class="c1"># å½“å‰æ–‡ä»¶å¤¹æ ‘</span>
&gt;<span class="w"> </span>mini_linux
</code></pre></div>

<p class="font-serif my-1"><red>æ‹‰å–æºç ç¼–è¯‘ï¼Œè¦å¼€å§‹äº†ã€‚</red></p></div></section><section><div class="center middle"><div style="width:100%"><div><h2 id="box" class="text-xl mt-2 pb-2 font-sans">å°è¯•æ‹‰å–boxæºç </h2>
<p class="font-serif my-1"><a href="https://busybox.net/downloads/busybox-1.36.1.tar.bz2">busybox1.36.1å‹ç¼©åŒ…</a><br/></p>
<div class="codehilite"><pre class="bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span/><code>wget<span class="w"> </span>https://busybox.net/downloads/busybox-1.36.1.tar.bz2
<span class="c1"># å½“å‰æ–‡ä»¶å¤¹æ ‘</span>
&gt;<span class="w"> </span>mini_linux
<span class="w">    </span>â””â”€â”€<span class="w"> </span>busybox-1.36.1.tar.bz2
</code></pre></div>

<h1 id="linux-kernel" class="text-2xl mt-2 font-sans">ç¼–è¯‘Linux kernel</h1>
<p class="font-serif my-1">å°±åƒç¼–è¯‘æ™®é€šçš„cç¨‹åºé‚£æ ·ç¼–è¯‘å®ƒ</p></div></div></div></section><section><div><h2 id="linux-kernel" class="text-xl mt-2 pb-2 font-sans">æ‹‰å–Linux kernelæºç </h2>
<p class="font-serif my-1"><a href="https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.5.9.tar.xz">linux-6.5.9</a></p>
<div class="codehilite"><pre class="bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span/><code>wget<span class="w"> </span>https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.5.9.tar.xz
<span class="c1"># å½“å‰æ–‡ä»¶å¤¹æ ‘</span>
&gt;<span class="w"> </span>mini_linux
<span class="w">    </span>â”œâ”€â”€<span class="w"> </span>linux-6.5.9.tar.xz
<span class="w">    </span>â”œâ”€â”€<span class="w"> </span>busybox-1.36.1.tar.bz2
<span class="w">    </span>â””â”€â”€<span class="w"> </span>busybox-1.36.1
<span class="w">    </span>â”‚<span class="w">   </span>â”œâ”€â”€<span class="w"> </span>...
<span class="w">    </span>â”‚<span class="w">   </span>â””â”€â”€<span class="w"> </span>build
<span class="w">    </span>â”‚<span class="w">       </span>â”œâ”€â”€<span class="w"> </span>...
<span class="w">            </span>â”œâ”€â”€<span class="w"> </span>busybox
<span class="w">            </span>â””â”€â”€<span class="w"> </span>_install
<span class="w">                </span>â””â”€â”€<span class="w"> </span>_install
</code></pre></div>

<div class="codehilite"><pre class="bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span/><code>tar<span class="w"> </span>-vxf<span class="w"> </span>linux-6.5.9.tar.xz
<span class="nb">cd</span><span class="w"> </span>linux-6.5.9<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>build
make<span class="w"> </span><span class="nv">O</span><span class="o">=</span>./build<span class="w"> </span>allnoconfig<span class="w"> </span>
<span class="nb">cd</span><span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>menuconfig
<span class="c1"># é…ç½®</span>
<span class="c1">#64-bit kernel ---&gt; yes</span>
<span class="c1">#General setup ---&gt; Initial RAM filesystem and RAM disk (initramfs/initrd) support ---&gt; yes</span>
<span class="c1">#General setup ---&gt; Configure standard kernel features ---&gt; Enable support for printk ---&gt; yes</span>
<span class="c1">#Executable file formats / Emulations ---&gt; Kernel support for ELF binaries ---&gt; yes</span>
<span class="c1">#Executable file formats / Emulations ---&gt; Kernel support for scripts starting with #! ---&gt; yes</span>
<span class="c1">#Device Drivers ---&gt; Generic Driver Options ---&gt; Maintain a devtmpfs filesystem to mount at /dev ---&gt; yes</span>
<span class="c1">#Device Drivers ---&gt; Generic Driver Options ---&gt; Automount devtmpfs at /dev, after the kernel mounted the rootfs ---&gt; yes</span>
<span class="c1">#Device Drivers ---&gt; Character devices ---&gt; Enable TTY ---&gt; yes</span>
<span class="c1">#Device Drivers ---&gt; Character devices ---&gt; Serial drivers ---&gt; 8250/16550 and compatible serial support ---&gt; yes</span>
<span class="c1">#Device Drivers ---&gt; Character devices ---&gt; Serial drivers ---&gt; Console on 8250/16550 and compatible serial port ---&gt; yes</span>
<span class="c1">#File systems ---&gt; Pseudo filesystems ---&gt; /proc file system support ---&gt; yes</span>
<span class="c1">#File systems ---&gt; Pseudo filesystems ---&gt; sysfs file system support ---&gt; yes</span>
<span class="nb">time</span><span class="w"> </span>make<span class="w"> </span>-j8
</code></pre></div>

<div class="codehilite"><pre class="bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span/><code><span class="c1"># å½“å‰æ–‡ä»¶å¤¹æ ‘</span>
&gt;<span class="w"> </span>mini_linux
<span class="w">    </span>â”œâ”€â”€<span class="w"> </span>linux-6.5.9.tar.xz
<span class="w">    </span>â”œâ”€â”€<span class="w"> </span>busybox-1.36.1.tar.bz2
<span class="w">    </span>â”œâ”€â”€<span class="w"> </span>linux-6.5.9
<span class="w">    </span>â”‚<span class="w">   </span>â””â”€â”€<span class="w"> </span>build
<span class="w">    </span>â”‚<span class="w">       </span>â”œâ”€â”€<span class="w"> </span>...
<span class="w">    </span>â”‚<span class="w">       </span>â”œâ”€â”€<span class="w"> </span>arch
<span class="w">    </span>â”‚<span class="w">       </span>â”œâ”€â”€<span class="w"> </span>â”œâ”€â”€<span class="w"> </span>...
<span class="w">    </span>â”‚<span class="w">       </span>â””â”€â”€<span class="w"> </span>â””â”€â”€<span class="w"> </span>x86_64
<span class="w">    </span>â”‚<span class="w">       </span>â”œâ”€â”€<span class="w"> </span>â”œâ”€â”€<span class="w"> </span>â”œâ”€â”€<span class="w"> </span>...
<span class="w">    </span>â”‚<span class="w">       </span>â””â”€â”€<span class="w"> </span>â””â”€â”€<span class="w"> </span>â””â”€â”€<span class="w"> </span>boot
<span class="w">    </span>â”‚<span class="w">       </span>â”œâ”€â”€<span class="w"> </span>â”œâ”€â”€<span class="w"> </span>â”œâ”€â”€<span class="w"> </span>â”œâ”€â”€<span class="w"> </span>...
<span class="w">    </span>â”‚<span class="w">       </span>â””â”€â”€<span class="w"> </span>â””â”€â”€<span class="w"> </span>â””â”€â”€<span class="w"> </span>â””â”€â”€<span class="w"> </span>bzImage
<span class="w">    </span>â””â”€â”€<span class="w"> </span>busybox-1.36.1
<span class="w">        </span>â”œâ”€â”€<span class="w"> </span>...
<span class="w">        </span>â””â”€â”€<span class="w"> </span>build
<span class="w">            </span>â”œâ”€â”€<span class="w"> </span>...
<span class="w">            </span>â”œâ”€â”€<span class="w"> </span>busybox
<span class="w">            </span>â””â”€â”€<span class="w"> </span>_install
</code></pre></div></div></section></section><section><section><div class="center middle"><div style="width:100%"><div><h1 id="qemumini_linux" class="text-2xl mt-2 font-sans">ä»qemuå¯åŠ¨mini_linux</h1>
<p class="font-serif my-1"><a href="../mini_linux/init">init</a></p>
<div class="codehilite"><pre class="bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span/><code>mkdir initramfs 
<span class="gh">#</span> æŠŠinitæ–‡ä»¶æ”¾åˆ°initramfsæ–‡ä»¶å¤¹é‡Œé¢
cd initramfs &amp;&amp; chmod +x init
mkdir -p bin sbin etc proc sys usr/bin usr/sbin
cp -a ../boxbusy-1.36.1/build/_install/* .
find . -print0 | cpio --null -ov --format=newc \
  | gzip -9 &gt; ./initramfs.cpio.gz
</code></pre></div>

<p class="font-serif my-1">ç°åœ¨å¯ä»¥å°è¯•è¿è¡Œäº†
<a href="../mini_linux/run.sh">run</a></p>
<div class="codehilite"><pre class="bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span/><code><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>./run.sh
</code></pre></div></div></div></div></section></section>
        </div>
    </div>

    <script src="./static/reveal/reveal.js"></script>

    <script>
        Reveal.initialize({

            width: 1024, height: 768,

            slideNumber: 'c/t',
            controlsTutorial: false,
            progress: false,
            hash: true,
            center: false,
            autoAnimateUnmatched: true,
            autoAnimateEasing: 'ease-out',
            autoAnimateDuration: 0.3,
            transitionSpeed: 'fast'
        });
    </script>
</body>

</html>